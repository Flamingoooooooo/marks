# 同源的定义：
* 两个URL的协议，域名，端口号一致则为同源(即使是域名和其对应的ip也算跨域)
# 同源策略的作用：
* 用于限制一个源的文档或脚本如何与另一个愿的资源交互，版主阻隔恶意文档，减少被攻击的媒介
* 跨域的请求实际上发送到服务器了，只是服务器的返回被浏览器拦截了
# 同源的限制内容：
* cookie、localStorage、IndexedDB等存储性内容
* DOM
* Ajax请求
# 允许跨域加载资源：
* img，link，script
## IE的特例：
* 没有将端口纳入到同源策略的检查
* 授信范围：两个互相之间高度互信的域名，如公司域名，不受同源限制

# 跨域的解决方案：
1. document.domain修改源
  * 将子域名下的文件的domain设置为父级域名，实现跨域
  * 缺点：只能把子域名的domain设置为父级，也就是说必须有父子关系
  * 注意点：端口号由浏览器检查，任何对document.domain的赋值都会使端口号变成null，因此需要跨域的命名被指定了端口号时，父子都需要设置domain以确保端口号都为null
2. jsonp：利用script标签没有跨域限制的漏洞，或者说特性。
  * 缺点：仅支持get方法，且不安全可能会受到XSS攻击
  * 实现：
3. CORS()跨域资源共享
  * 关键在于后端，设置Access-Control-Allow-Origin就可以开启CORS，这个属性表示那些域名可以访问资源，若设置通配符则说明所有网站都可以访问，若为Origin说明不允许跨域
  * CORS发送请求分为两种：
    1. 简单请求，需要满足：
      * 请求方式为get，head，post中的一种
      * Content-type的值为text/plain,multipart/form-data,application/x-www-form-urlencoded中的一种
    2. 其他都是复杂请求，复杂请求会在正式通信前额外发送一个http查询请求，称为预检，使用的请求方式是option
      * 服务器确认该请求后，才能发起正式的请求
      * 在预检请求的返回中，服务器端也可以通知客户端，是否需要携带身份凭证（包括 Cookies 和 HTTP 认证相关数据）。
4. 其他方法：
  1. postmassage
  2. websocket
  3. node中间件：设置代理服务器把请求转发，因为同源策略是浏览器的，服务器之间没有同源策略
  4. nginx反向代理，和node中间件的原理差不多
  5. window.name+iframe
  6. location.hash+iframe
